# サンドボックス検証結果まとめ

> **最終更新**: 2025-06-22
> **カテゴリ**: Research
> **関連文書**: [開発ガイドライン](development-guidelines.md), [技術決定事項](technical-decisions.md)

## 概要

このドキュメントは、各サンドボックスで得られた検証結果と知見をまとめたものです。詳細は各サンドボックスの`FINDINGS.md`を参照してください。

## 検証済みサンドボックス

### 1. OpenWakeWord（2025年6月22日）

**結論**: macOS環境では動作不可

**主な発見**:
- ONNXモデルは正常にロード可能
- 音声検出は正常に動作
- **推論時にSIGSEGVでクラッシュ**（C++レベルのバグ）
- PyTorchバックエンドも同様のエラー

**代替案**: Porcupineへの移行を決定

### 2. Whisper音声認識（2025年6月22日）

**結論**: 実用レベルで動作、マルチレベル認識で高精度化

**主な発見**:
- smallモデルで日本語認識は実用的
- 処理速度: 2-8倍速（音声長依存）
- 音声検出閾値: RMS 200-250が最適
- 誤認識パターン:
  - 固有名詞（Eテレ→いいテレイ）
  - 数字（3→さん）
  - 無音時の定型句

**推奨実装**:
- マルチレベル認識（3秒/8秒/20秒/無音区切り）
- オーバーラップ処理必須
- マルチプロセスで並列処理

## 技術選定への影響

### ウェイクワード検出
- ❌ OpenWakeWord: macOS非対応
- ✅ Porcupine: 採用決定

### 音声認識
- ✅ Whisper: オフライン動作で採用
- 🔄 Web Speech API: オンライン時のバックアップ

### アーキテクチャ
- マルチプロセス処理の有効性を確認
- リングバッファによるメモリ効率化
- 段階的な認識精度向上手法の確立

## 今後の検証予定

1. **Porcupineの動作確認**
   - カスタムウェイクワード作成
   - 複数ウェイクワード対応
   - 消費電力測定

2. **統合テスト**
   - ウェイクワード → Whisper連携
   - レスポンス時間の最適化
   - エラーハンドリング

3. **Raspberry Pi環境**
   - 動作確認
   - パフォーマンス測定
   - 最適化

## 教訓

1. **段階的な実装**
   - 小さく始めて徐々に機能追加
   - 各段階で動作確認

2. **実測値の重要性**
   - 理論値より実際の動作確認
   - ユーザーフィードバックの即座反映

3. **ドキュメント化**
   - 開発過程の詳細記録
   - 失敗も含めて知見として保存

## 関連ドキュメント

- [Whisper開発履歴](/sandbox/whisper/DEVELOPMENT_HISTORY.md)
- [Whisper検証結果](/sandbox/whisper/FINDINGS.md)
- [OpenWakeWord検証結果](/sandbox/openwakeword/FINDINGS.md)